<app-notification-toast></app-notification-toast>

<header class="header">
  <nav class="container nav">
    <a class="brand" routerLink="/">
      <img class="brand-logo animated" src="assets/logo-neon.gif" alt="Logo Barbearia" width="40" height="40" />
      <span>Barbearia</span>
    </a>

    <!-- Toggle sem JS -->
    <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-label="Abrir menu" #navToggler>
    <label for="nav-toggle" class="nav-burger" aria-controls="nav-menu" [attr.aria-expanded]="navToggler?.checked ? 'true' : 'false'">
      <span></span><span></span><span></span>
    </label>

    <!-- Menu DENTRO do nav para desktop -->
    <div id="nav-menu" class="nav-menu">
      <div class="nav-links">
        <a routerLink="/" [routerLinkActiveOptions]="{exact:true}"
                                                                                                                                                                                                                                           routerLinkActive="active" (click)="closeMenu(navToggler)">{{ lang.t('nav.home') }}</a>

        <a routerLink="/servicos" routerLinkActive="active"
           (click)="closeMenu(navToggler)">{{ lang.t('nav.services') }}</a>

        <a routerLink="/marcacao" routerLinkActive="active"
           (click)="closeMenu(navToggler)">{{ lang.t('nav.booking') }}</a>

        <a *ngIf="isLoggedIn" routerLink="/historico" routerLinkActive="active"                                                                             
           (click)="closeMenu(navToggler)">{{ lang.t('nav.history') }}</a>
      </div>

      <div class="auth-actions">
        <!-- Seletor de Idioma -->
        <button class="language-selector" 
                (click)="toggleLanguage()"
                [title]="lang.currentLanguage() === 'pt' ? 'Switch to English' : 'Mudar para PortuguÃªs'"
                aria-label="Change language">
          <span class="flag">{{ lang.currentLanguage() === 'pt' ? 'ðŸ‡µðŸ‡¹' : 'ðŸ‡¬ðŸ‡§' }}</span>
          <span class="lang-code">{{ lang.currentLanguage().toUpperCase() }}</span>
        </button>

        <!-- antes: *ngIf="isHome && !isLoggedIn" -->
        <a *ngIf="!isLoggedIn && !isAuthPage" routerLink="/login" class="btn accent small">{{ lang.t('nav.login') }}</a>

        <!-- apenas o botÃ£o Sair quando autenticado -->
        <button *ngIf="isLoggedIn"
                class="btn logout"
                (click)="logout(); closeMenu(navToggler)">{{ lang.t('nav.logout') }}</button>
      </div>
    </div>
  </nav>
</header>


<main class="container">
  <router-outlet></router-outlet>
</main>

<footer class="footer">
  <div class="container footer-content">
    <div class="footer-info">
      <span class="copyright">Â© {{ year }} Barbearia</span>
      <span class="separator">Â·</span>
      <span class="footer-item">
        <svg class="footer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
        {{ lang.t('footer.address') }}
      </span>
      <span class="separator">Â·</span>
      <span class="footer-item">
        <svg class="footer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
        </svg>
        (+351) 900 000 000
      </span>
    </div>
    <div class="footer-credit">
      {{ lang.t('footer.developed') }}
    </div>
  </div>
</footer>
