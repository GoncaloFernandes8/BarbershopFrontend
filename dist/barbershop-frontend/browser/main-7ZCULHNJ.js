import{c as h}from"./chunk-WTSW2KME.js";import{$ as x,Ca as F,D as c,Da as z,Ea as $,Fa as q,G as w,Ha as J,Ia as _,Ja as U,K as S,Ka as W,La as Y,M as B,Ma as G,N as v,Q as o,R as a,S as C,V as b,W as f,X as M,Y as u,Z as p,f as E,fa as P,j as I,k as H,m as T,ma as N,q as R,t as l,ta as V,v as m,w as d,xa as D,ya as O,z as y,za as j}from"./chunk-VTAVQ2BQ.js";var Z=()=>({exact:!0});function ee(e,r){if(e&1){let t=b();o(0,"a",18),f("click",function(){m(t);let i=M(),s=u(7);return d(i.closeMenu(s))}),p(1,"Hist\xF3rico"),a()}}function te(e,r){e&1&&(o(0,"a",19),p(1,"Login"),a())}function re(e,r){if(e&1){let t=b();o(0,"button",20),f("click",function(){m(t);let i=M(),s=u(7);return i.logout(),d(i.closeMenu(s))}),p(1,"Sair"),a()}}var k=class e{year=new Date().getFullYear();router=l(_);el=l(y);auth=l(h);isAuthPage=!1;get isLoggedIn(){return!!this.auth.user}get userName(){return this.auth.user?.name??""}get isHome(){return this.router.url==="/"||this.router.url.startsWith("/?")}closeMenu(r){r&&(r.checked=!1)}ngOnInit(){this.router.events.pipe(I(r=>r instanceof q)).subscribe(()=>{let r=this.el.nativeElement.querySelector("#nav-toggle");r&&(r.checked=!1);let t=this.router.url;this.isAuthPage=t.startsWith("/login")||t.startsWith("/registar")})}logout(){this.auth.logout(),this.router.navigateByUrl("/")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-root"]],decls:29,vars:7,consts:[["navToggler",""],[1,"header"],[1,"container","nav"],["routerLink","/",1,"brand"],["src","assets/logo-neon.gif","alt","Logo Barbearia","width","40","height","40",1,"brand-logo","animated"],["type","checkbox","id","nav-toggle","aria-label","Abrir menu",1,"nav-toggle"],["for","nav-toggle","aria-controls","nav-menu",1,"nav-burger"],["id","nav-menu",1,"nav-menu"],[1,"nav-links"],["routerLink","/","routerLinkActive","active",3,"click","routerLinkActiveOptions"],["routerLink","/servicos","routerLinkActive","active",3,"click"],["routerLink","/marcacao","routerLinkActive","active",3,"click"],["routerLink","/historico","routerLinkActive","active",3,"click",4,"ngIf"],[1,"auth-actions"],["routerLink","/login","class","btn accent small",4,"ngIf"],["class","btn logout",3,"click",4,"ngIf"],[1,"container"],[1,"footer"],["routerLink","/historico","routerLinkActive","active",3,"click"],["routerLink","/login",1,"btn","accent","small"],[1,"btn","logout",3,"click"]],template:function(t,n){if(t&1){let i=b();o(0,"header",1)(1,"nav",2)(2,"a",3),C(3,"img",4),o(4,"span"),p(5,"Barbearia"),a()(),C(6,"input",5,0),o(8,"label",6),C(9,"span")(10,"span")(11,"span"),a(),o(12,"div",7)(13,"div",8)(14,"a",9),f("click",function(){m(i);let g=u(7);return d(n.closeMenu(g))}),p(15,"In\xEDcio"),a(),o(16,"a",10),f("click",function(){m(i);let g=u(7);return d(n.closeMenu(g))}),p(17,"Servi\xE7os"),a(),o(18,"a",11),f("click",function(){m(i);let g=u(7);return d(n.closeMenu(g))}),p(19,"Marca\xE7\xE3o"),a(),S(20,ee,2,0,"a",12),a(),o(21,"div",13),S(22,te,2,0,"a",14)(23,re,2,0,"button",15),a()()()(),o(24,"main",16),C(25,"router-outlet"),a(),o(26,"footer",17)(27,"div",16),p(28),a()()}if(t&2){let i=u(7);c(8),B("aria-expanded",i!=null&&i.checked?"true":"false"),c(6),v("routerLinkActiveOptions",P(6,Z)),c(6),v("ngIf",n.isLoggedIn),c(2),v("ngIf",!n.isLoggedIn&&!n.isAuthPage),c(),v("ngIf",n.isLoggedIn),c(5),x(" \xA9 ",n.year," Barbearia \u2014 Rua Principal, 123 \xB7 (+351) 900 000 000 ")}},dependencies:[D,V,J,U,W],encapsulation:2})};var L=()=>{let e=l(h),r=l(_);return e.isApproved?!0:(r.navigate(["/login"]),!1)};var Q=[{path:"login",loadComponent:()=>import("./chunk-4ONCQBWF.js").then(e=>e.AuthComponent),title:"Login \xB7 Barbearia"},{path:"registar",loadComponent:()=>import("./chunk-4ONCQBWF.js").then(e=>e.AuthComponent),title:"Criar conta \xB7 Barbearia"},{path:"",loadComponent:()=>import("./chunk-FLMMUP2H.js").then(e=>e.HomeComponent),title:"Barbearia"},{path:"sucesso/:id",loadComponent:()=>import("./chunk-CK55MTW3.js").then(e=>e.SuccessComponent),title:"Confirmado \xB7 Barbearia"},{path:"servicos",loadComponent:()=>import("./chunk-MQG2TMAQ.js").then(e=>e.ServicesComponent),title:"Servi\xE7os \xB7 Barbearia"},{path:"marcacao",loadComponent:()=>import("./chunk-IPXLV4UM.js").then(e=>e.BookingComponent),canActivate:[L],title:"Marca\xE7\xE3o \xB7 Barbearia"},{path:"historico",loadComponent:()=>import("./chunk-ORBCAG7S.js").then(e=>e.HistoryComponent),canActivate:[L],title:"Hist\xF3rico \xB7 Barbearia"},{path:"confirmar",loadComponent:()=>import("./chunk-UWI4VPOV.js").then(e=>e.ConfirmComponent),title:"Confirmar email"},{path:"**",loadComponent:()=>import("./chunk-O73RF54F.js").then(e=>e.NotFoundComponent),title:"N\xE3o encontrado"}];function ne(e){let r=e,t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length,i=parseInt(e.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===Math.floor(t)&&t>=0&&t<=1?1:i===0&&t!==0&&t%1e6===0&&n===0||!(i>=0&&i<=5)?4:5}var K=["pt",[["AM","PM"],void 0,void 0],void 0,[["D","S","T","Q","Q","S","S"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."],["domingo","segunda-feira","ter\xE7a-feira","quarta-feira","quinta-feira","sexta-feira","s\xE1bado"],["dom.","seg.","ter.","qua.","qui.","sex.","s\xE1b."]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],["janeiro","fevereiro","mar\xE7o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]],void 0,[["a.C.","d.C."],void 0,["antes de Cristo","depois de Cristo"]],0,[6,0],["dd/MM/y","d 'de' MMM 'de' y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4\xA0#,##0.00","#E0"],"BRL","R$","Real brasileiro",{AUD:["AU$","$"],BYN:[void 0,"\u0440."],JPY:["JP\xA5","\xA5"],PHP:[void 0,"\u20B1"],PTE:["Esc."],RON:[void 0,"L"],SYP:[void 0,"S\xA3"],THB:["\u0E3F"],TWD:["NT$"],USD:["US$","$"]},"ltr",ne];var A=class e{authService=l(h);isRefreshing=!1;intercept(r,t){if(r.url.includes("/auth/"))return t.handle(r);let n=localStorage.getItem("auth_token");if(n){let i=r.clone({setHeaders:{Authorization:`Bearer ${n}`}});return t.handle(i).pipe(H(s=>s.status===401&&!this.isRefreshing?this.handle401Error(r,t):E(()=>s)))}return t.handle(r)}handle401Error(r,t){return this.isRefreshing?t.handle(r):(this.isRefreshing=!0,this.authService.refreshToken().pipe(T(()=>{this.isRefreshing=!1;let n=localStorage.getItem("auth_token"),i=r.clone({setHeaders:{Authorization:`Bearer ${n}`}});return t.handle(i)}),H(n=>(this.isRefreshing=!1,this.authService.logout(),E(()=>n)))))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=R({token:e,factory:e.\u0275fac})};O(K);j(k,{providers:[{provide:N,useValue:"pt-PT"},Y(Q,G()),z($()),{provide:F,useClass:A,multi:!0}]}).catch(e=>console.error(e));
