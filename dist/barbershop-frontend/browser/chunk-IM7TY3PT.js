import{a as b}from"./chunk-JUGMSLXR.js";import"./chunk-IFE72Z7Y.js";import{A as c,D as a,G as d,Ga as x,Ja as k,K as l,N as s,P as p,Q as i,R as n,T as g,U as u,X as v,Z as r,_ as h,t as m,ta as C,xa as _}from"./chunk-VTAVQ2BQ.js";function E(t,o){t&1&&(i(0,"p",3),r(1,"A confirmar\u2026"),n())}function M(t,o){t&1&&(i(0,"span"),r(1,"\u2713"),n())}function I(t,o){t&1&&(i(0,"span"),r(1,"\u2717"),n())}function w(t,o){if(t&1&&(g(0),i(1,"div",4)(2,"div",5),l(3,M,2,0,"span",2)(4,I,2,0,"span",2),n(),i(5,"p"),r(6),n()(),i(7,"div",6)(8,"a",7),r(9,"Ir para o login"),n(),i(10,"a",8),r(11,"Voltar ao in\xEDcio"),n()(),u()),t&2){let e=v();a(2),p(e.ok()?"success":"error"),a(),s("ngIf",e.ok()),a(),s("ngIf",!e.ok()),a(),p(e.ok()?"success":"error"),a(),h(e.msg())}}var y=class t{route=m(x);auth=m(b);loading=c(!0);ok=c(null);msg=c("A confirmar\u2026");ngOnInit(){let o=this.route.snapshot.queryParamMap.get("token");if(!o){this.loading.set(!1),this.ok.set(!1),this.msg.set("Liga\xE7\xE3o inv\xE1lida: falta o token.");return}this.auth.verifyEmail(o).subscribe({next:e=>{this.loading.set(!1),this.ok.set(e.verified),this.msg.set(e.verified?"Email confirmado! J\xE1 podes iniciar sess\xE3o.":e.message??"N\xE3o foi poss\xEDvel confirmar.")},error:e=>{this.loading.set(!1),this.ok.set(!1),this.msg.set(e?.error?.message??"Token inv\xE1lido ou expirado.")}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-confirm"]],decls:5,vars:2,consts:[[1,"card",2,"padding","1.25rem"],["class","muted",4,"ngIf"],[4,"ngIf"],[1,"muted"],[1,"status-container"],[1,"status-icon"],[1,"actions",2,"margin-top","1rem"],["routerLink","/login",1,"btn","accent"],["routerLink","/",1,"btn"]],template:function(e,f){e&1&&(i(0,"section",0)(1,"h1"),r(2,"Confirmar email"),n(),l(3,E,2,0,"p",1)(4,w,12,7,"ng-container",2),n()),e&2&&(a(3),s("ngIf",f.loading()),a(),s("ngIf",!f.loading()))},dependencies:[_,C,k],styles:[".status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:var(--space-4);margin:var(--space-6) 0}.status-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:var(--font-size-3xl);font-weight:var(--font-weight-bold);box-shadow:var(--shadow-lg)}.status-icon.success[_ngcontent-%COMP%]{background:var(--color-primary);color:var(--color-background)}.status-icon.error[_ngcontent-%COMP%]{background:var(--status-error);color:#fff}.success[_ngcontent-%COMP%]{color:var(--color-primary);font-weight:var(--font-weight-semibold)}.error[_ngcontent-%COMP%]{color:var(--status-error);font-weight:var(--font-weight-semibold)}"]})};export{y as ConfirmComponent};
