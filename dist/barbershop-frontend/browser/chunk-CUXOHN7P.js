import{a as _}from"./chunk-LVDKNU2I.js";import"./chunk-ID5D7IBA.js";import{A as s,D as r,G as f,Ga as k,Ja as E,K as p,N as l,P as d,Q as o,R as n,T as g,U as u,X as C,Z as a,_ as v,t as m,ta as h,xa as x}from"./chunk-VTAVQ2BQ.js";function I(t,i){t&1&&(o(0,"p",3),a(1,"A confirmar\u2026"),n())}function y(t,i){if(t&1&&(g(0),o(1,"p"),a(2),n(),o(3,"div",4)(4,"a",5),a(5,"Ir para o login"),n(),o(6,"a",6),a(7,"Voltar ao in\xEDcio"),n()(),u()),t&2){let e=C();r(),d(e.ok()?"success":"error"),r(),v(e.msg())}}var b=class t{route=m(k);auth=m(_);loading=s(!0);ok=s(null);msg=s("A confirmar\u2026");ngOnInit(){let i=this.route.snapshot.queryParamMap.get("token");if(!i){this.loading.set(!1),this.ok.set(!1),this.msg.set("Liga\xE7\xE3o inv\xE1lida: falta o token.");return}this.auth.verifyEmail(i).subscribe({next:e=>{this.loading.set(!1),this.ok.set(e.verified),this.msg.set(e.verified?"Email confirmado! J\xE1 podes iniciar sess\xE3o.":e.message??"N\xE3o foi poss\xEDvel confirmar.")},error:e=>{this.loading.set(!1),this.ok.set(!1),this.msg.set(e?.error?.message??"Token inv\xE1lido ou expirado.")}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-confirm"]],decls:5,vars:2,consts:[[1,"card",2,"padding","1.25rem"],["class","muted",4,"ngIf"],[4,"ngIf"],[1,"muted"],[1,"actions",2,"margin-top","1rem"],["routerLink","/login",1,"btn","accent"],["routerLink","/",1,"btn"]],template:function(e,c){e&1&&(o(0,"section",0)(1,"h1"),a(2,"Confirmar email"),n(),p(3,I,2,0,"p",1)(4,y,8,3,"ng-container",2),n()),e&2&&(r(3),l("ngIf",c.loading()),r(),l("ngIf",!c.loading()))},dependencies:[x,h,E],styles:[".success[_ngcontent-%COMP%]{color:#c3ff5a}.error[_ngcontent-%COMP%]{color:#ff6b6b}"]})};export{b as ConfirmComponent};
